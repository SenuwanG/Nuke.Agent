#!/usr/bin/env python3

import yum
from fpdf import FPDF
import requests

yum_client = yum.YumBase()
packages = yum_client.rpmdb.returnPackages()

# Create PDF object
pdf = FPDF()  

# Add page  
pdf.add_page()   

# Set font    
pdf.set_font("Arial", size = 15)

# Add title
pdf.cell(200, 10, txt = "Installed Software ... Report", 
             ln = 1, align = 'C')

# Check packages for vulnerabilities     
for package in packages:
    name = package.name 
    version = package.version
    
    # Check vulnerability database...
    
    # Add to PDF
    pdf.cell(200, 10, txt = f"{name} - {version}")

# Save PDF    
pdf.output("report.pdf")

# Send PDF to server
files = {'report': open('report.pdf', 'rb')}     
requests.post(url, files=files)
