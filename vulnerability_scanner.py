import subprocess
from fpdf import FPDF

# Execute shell command to get installed packages
command = "rpm -qa --queryformat '%{NAME} %{VERSION}\n'"
output = subprocess.check_output(command, shell=True, text=True)

# Split the output into lines
lines = output.splitlines()

# Create PDF object
pdf = FPDF()

# Add a page
pdf.add_page()

# Set font
pdf.set_font("Arial", size=15)

# Add a title
pdf.cell(200, 10, txt="Installed Software Report", ln=1, align='C')

# Iterate through the lines and add to PDF
for line in lines:
    package, version = line.split()
    pdf.cell(0, 10, txt=f"{package} {version}", ln=1)

# Save PDF data
pdf.output("report.pdf")

# Send PDF in HTTP request
files = {'report': open('report.pdf', 'rb')}
requests.post(url, files=files)
